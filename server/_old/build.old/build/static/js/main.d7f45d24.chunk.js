(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},106:function(e,t,a){},136:function(e,t){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},237:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),s=a.n(c),o=(a(97),a(20)),i=a.n(o),l=a(34),u=a(21),m=a(3),d=(a(99),a(100),a(4)),h=a(7),p=a(6),v=a(5),f=(a(101),window.origin.toString()),y=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e.toggleClass=function(e){e.preventDefault(),document.querySelectorAll(".header__elem1__link").forEach((function(e){return e.classList.remove("--selected")})),e.currentTarget.classList.add("--selected")},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header__elem1"},r.a.createElement("div",{className:"header__elem1__logo"}," Logo "),r.a.createElement("div",{className:"header__elem1__link quick",onClick:this.toggleClass}," ",r.a.createElement(u.b,{to:"/quick"},"Quick")," "),r.a.createElement("div",{className:"header__elem1__link search",onClick:this.toggleClass}," ",r.a.createElement(u.b,{to:"/wd"},"Search")," "),r.a.createElement("div",{className:"header__elem1__link about",onClick:this.toggleClass}," ",r.a.createElement(u.b,{to:"/about"},"About")," ")),r.a.createElement("div",{className:"header__elem2"},r.a.createElement("div",null," ",f.includes("osh")?"public":"live-dev"," ")))}}]),a}(r.a.Component),g=(a(106),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"footer"}," https://developers.neople.co.kr/contents/apiDocs/df ")}}]),a}(r.a.Component));var E=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"dd")}}]),a}(r.a.Component),b=a(86),w=a.n(b);a(139);var k,N=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={snapshot:{},prevSnapshot:{},summary:{},prevSummary:{},cuttline:75e5,timeStamp:0,connect:0,shown:!0,color:"--white",tempAlramVar:0},e.socket="",e.componentWillUnmount=function(){e.socket.disconnect()},e.notiCallback=function(){var t=e.state.summary.lowest,a=1*t["\uc0ac\ub3c4\uc758 \uac15\ub9bc \ud328\ud0a4\uc9c0"]-.97*(t["\uc0ac\ub3c4\uc758 \uac15\ub9bc \uce6d\ud638 \uc0c1\uc790"]+t["\uc0ac\ub3c4\uc758 \uac15\ub9bc \uc624\ub77c \uc0c1\uc790"]+t["\uc0ac\ub3c4\uc758 \uac15\ub9bc \uc138\ub77c \uc0c1\uc790"]+t["\uc0ac\ub3c4\uc758 \uac15\ub9bc \uc2a4\ud398\uc15c \ubcf4\ubb3c \uc0c1\uc790"]),n=t["\uc0ac\ub3c4\uc758 \uac15\ub9bc \uc544\ubc14\ud0c0 \ud480\uc138\ud2b8 \uc0c1\uc790"];if(console.log(a,e.state.cuttline,e.state.hash,e.hashConvert(e.state.hash)),(a<=e.state.cuttline||n<=e.state.cuttline)&&0===e.state.tempAlramVar){e.setState({tempAlramVar:1},(function(){setTimeout((function(){return e.setState({tempAlramVar:0})}),15e3)})),new Notification("\uc54c\ub9bc",{body:"".concat(e.hashConvert(e.state.hash),"\uff20").concat(Math.floor(a))})}},e.hashCode=function(e){return e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0)},e.hashConvert=function(e){return String(Math.abs(e)).split("").map((function(e){return 1*e})).reduce((function(e,t){return e+=String.fromCharCode(97+t)}),"")},e.signString=function(e,t){var a=t-e,n=Math.sign(a)+0;return 0===n?["--zero","","-"]:1===n?["--plus","\u2191 ",Math.abs(a).toLocaleString("en")]:-1===n?["--minus","\u2193 ",Math.abs(a).toLocaleString("en")]:void 0},e.toggle=function(e){console.log(e.target.classList);var t=document.querySelector("#".concat(e.target.getAttribute("id")));"none"===t.style.display?t.style.display="flex":t.style.display="none"},e.isOverCuttLine=function(t){return!1!==!!t&&Math.sign(t-e.state.cuttline)<1},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("\ud83d\udd0c component.Quick.mount");var t=window.location.origin.split(":");t[0],t[1];this.socket=w.a.connect(t[1],{transports:["websocket"]},{reconnectionAttempts:5});var a=this.socket;Notification.requestPermission(),a.on("connect",(function(){console.log("\u2705 socket.on.connect"),a.emit("connect-quick-first","")})),a.on("connect_failed",(function(){console.log("connect_failed")})),a.on("reconnect_failed",(function(){console.log("reconnect_failed")})),a.on("snapshot-2",(function(t,a){console.log("\ud83d\udd3b socket.on.snapshot-2"),e.setState({color:"--green"},(function(){setTimeout((function(){return e.setState({color:"--black"})}),500)}));var n=t,r=e.state.snapshot,c=e.hashCode(JSON.stringify(n)),s=e.hashCode(JSON.stringify(r)),o=0!==Object.keys(e.state.prevSnapshot).length,i={lowest:Object.keys(n).reduce((function(e,t){return e[t]=n[t][0].unitPrice,e}),{}),prevLowest:Object.keys(r).reduce((function(e,t){return e[t]=r[t][0].unitPrice,e}),{}),quantity:Object.keys(n).reduce((function(e,t){return e[t]=n[t].reduce((function(e,t){return e+=t.count}),0),e}),{}),hash:c};if(o)if(0!==s-c){var l=e.state.snapshot,u=e.state.summary;e.setState({snapshot:n,prevSnapshot:l,summary:i,prevSummary:u,timeStamp:a,hash:c},e.notiCallback)}else e.setState({snapshot:n,summary:i,timeStamp:a,hash:c});else e.setState({snapshot:n,prevSnapshot:n,summary:i,prevSummary:i,timeStamp:a,hash:c},(function(){}))}))}},{key:"render",value:function(){var e=this,t=this.state.snapshot,a=(this.state.prevSnapshot,this.state.summary,this.state.prevSummary,this.state.summary.lowest||{}),n=this.state.prevSummary.lowest||{},c=this.state.summary.quantity||{},s=1*a["\uc0ac\ub3c4\uc758 \uac15\ub9bc \ud328\ud0a4\uc9c0"]-.97*(a["\uc0ac\ub3c4\uc758 \uac15\ub9bc \uce6d\ud638 \uc0c1\uc790"]+a["\uc0ac\ub3c4\uc758 \uac15\ub9bc \uc624\ub77c \uc0c1\uc790"]+a["\uc0ac\ub3c4\uc758 \uac15\ub9bc \uc138\ub77c \uc0c1\uc790"]+a["\uc0ac\ub3c4\uc758 \uac15\ub9bc \uc2a4\ud398\uc15c \ubcf4\ubb3c \uc0c1\uc790"]),o=this.isOverCuttLine(s);n["\uc0ac\ub3c4\uc758 \uac15\ub9bc \ud328\ud0a4\uc9c0"],n["\uc0ac\ub3c4\uc758 \uac15\ub9bc \uce6d\ud638 \uc0c1\uc790"],n["\uc0ac\ub3c4\uc758 \uac15\ub9bc \uc624\ub77c \uc0c1\uc790"],n["\uc0ac\ub3c4\uc758 \uac15\ub9bc \uc138\ub77c \uc0c1\uc790"],n["\uc0ac\ub3c4\uc758 \uac15\ub9bc \uc2a4\ud398\uc15c \ubcf4\ubb3c \uc0c1\uc790"],!1===!!s||Math.sign(s-this.state.cuttline);return r.a.createElement("div",{id:"quick"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"lowest"},r.a.createElement("div",{className:"attribute row --shown-"+this.state.shown,onClick:function(){return e.setState({shown:!e.state.shown})}},r.a.createElement("div",{className:"attribute cell --long"}," \uac80\uc0c9\uc5b4 "),r.a.createElement("div",{className:"attribute cell --short"}," \uac00\uaca9 "),r.a.createElement("div",{className:"attribute cell --short"}," \ubcc0\ub3d9\ud3ed "),r.a.createElement("div",{className:"attribute cell --extra-short"}," \ubb3c\ub7c9 ")),Object.keys(a).map((function(s,o){var i,l=a[s],u=(i=a[s],Number(i).toLocaleString("en")),m=e.signString(n[s],a[s]),d=s.includes("\uc0ac\ub3c4\uc758 \uac15\ub9bc \uc544\ubc14\ud0c0 \ud480\uc138\ud2b8 \uc0c1\uc790");return r.a.createElement("div",{className:"data row "+(e.isOverCuttLine(l)&&d?"--red":"--none"),key:o},r.a.createElement("div",{className:"data cell --long --elipsis"}," ",Object.keys(t).length>=1?t[s][0].itemName:s," "),r.a.createElement("div",{className:"data cell --short --num"}," ",u," "),r.a.createElement("div",{className:"data cell --short --num "+m[0]}," ",m[1],m[2]," "),r.a.createElement("div",{className:"data cell --extra-short --num "}," ",c[s]," "))})),r.a.createElement("div",{className:"data row "+(o?"--red":"--none")},r.a.createElement("div",{className:"data cell --long"}," ","\uc2e4\uc81c \uc544\ubc14\ud0c0\uac12"," "),r.a.createElement("div",{className:"data cell --short --num "}," ",Math.floor(s||0).toLocaleString("en")||0," "),r.a.createElement("div",{className:"data cell --short"}," "," "),r.a.createElement("div",{className:"data cell --extra-short"}," "," ")),r.a.createElement("div",{className:"lowest-tail --flex"},r.a.createElement("div",{className:"--flex --space-between"},r.a.createElement("div",{className:"--flex"},r.a.createElement("div",null,r.a.createElement("i",{className:"fas fa-caret-square-down "+this.state.color+" --temp"})),r.a.createElement("div",null," ",new Date(this.state.timeStamp||0).toLocaleTimeString()," ")),r.a.createElement("div",null," ",this.hashConvert(this.state.hash)," ")),r.a.createElement("div",{className:"--flex --relative"},r.a.createElement("i",{className:"fas fa-eye --inner-eye"}),r.a.createElement("input",{className:"--simpleInput",value:this.state.cuttline,onChange:function(t){return e.setState({cuttline:Number(t.target.value)})}})))),r.a.createElement("div",{className:"snapshot"})),r.a.createElement("div",{className:"honey-bee"}))}}]),a}(r.a.Component),S=(r.a.Component,N),j=a(24),_=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showDetails:!1},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.rows;return r.a.createElement("div",{className:"layer-b"},e.map((function(e,t){return r.a.createElement("div",{className:"layer-c",key:t},r.a.createElement("div",null," ",e.itemName," "),r.a.createElement("div",null," ",e.count," "),r.a.createElement("div",null," ",e.unitPrice.toLocaleString("en")," "))})))}}]),a}(r.a.Component),O=(a(140),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showDetails:!1},e.toggleDetail=function(){e.setState({showDetails:!e.state.showDetails})},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.data,t=this.props.query,a=e._timeStamp||0,n=new Date(a),c=e[t].rows||[];return r.a.createElement("div",{className:"layer-a "+(this.state.showDetails&&"--showDetail")},r.a.createElement("div",{className:"head",onClick:this.toggleDetail},r.a.createElement("div",null," ","\u3141"," ",n.toLocaleString()," "),r.a.createElement("div",null," "),r.a.createElement("div",null," ",c[0].unitPrice.toLocaleString("en")," ")),r.a.createElement(_,{rows:c||[]}))}}]),a}(r.a.Component)),C=(a(141),a(142),a(260)),x=[],q=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e.submit=function(t){var a=document.querySelector("#autoComplete").value;"Enter"===t.key&&0!==a.length&&e.props.onEnter(a)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\ud83d\udd0c component.tf.mount"),e.next=3,fetch("/api/getIndex");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,x=[],e.next=10,a.forEach((function(e){return x.push({title:e})}));case 10:this.setState(x);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{width:300}},r.a.createElement(C.a,{id:"autoComplete",options:x.map((function(e){return e.title})),renderInput:function(t){return r.a.createElement("div",{ref:t.InputProps.ref,className:"search-input"},r.a.createElement("div",{className:"fas-wrapper"},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("input",Object.assign({},t.inputProps,{label:"freeSolo",margin:"normal",variant:"outlined",placeholder:"\uac80\uc0c9\ud560 \uc544\uc774\ud15c \uc785\ub825",onKeyDown:e.submit})))}}))}}]),a}(r.a.Component),D=a(88),A=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.renderData||{},t=Object.keys(e),a=this.props.query,n=((((e[0]||{})[a]||[]).rows||[])[0],t.reduce((function(t,a,n){return t.push(new Date(e[a]._timeStamp).toLocaleString()),t}),[])),c=t.reduce((function(t,n,r){var c=(((e[n]||{})[a]||[]).rows||[]).reduce((function(e,t,a){return e+=t.count}),0);return t.push(c),t}),[]),s=t.reduce((function(t,n,r){var c=((((e[n]||{})[a]||[]).rows||[])[0]||{}).unitPrice||0;return t.push(c),t}),[]),o=t.reduce((function(t,n,r){var c=((((e[n]||{})[a]||[]).rows||[])[0]||{}).averagePrice||0;return t.push(c),t}),[]),i={labels:n.reverse(),datasets:[{label:"\ucd5c\uc800\uac00",borderColor:"red",borderWidth:2,pointRadius:1,backgroundColor:"#FFF0",data:s.reverse(),yAxisID:"yAxes-1"},{label:"\ud3c9\uade0\uac00",borderColor:"blue",borderWidth:2,pointRadius:1,backgroundColor:"#FFF0",data:o.reverse(),yAxisID:"yAxes-1"},{label:"\ubb3c\ub7c9",borderColor:"black",borderWidth:2,pointRadius:1,data:c.reverse(),yAxisID:"yAxes-2"}]};return r.a.createElement(D.Line,{data:i,options:{scales:{yAxes:[{id:"yAxes-1",type:"linear",display:!0,position:"left",ticks:{}},{id:"yAxes-2",type:"linear",display:!0,position:"right",gridLines:{display:!1}}]}}})}}]),a}(r.a.Component),L=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={query:"\ucc2c\ub780\ud55c \ubd89\uc740\ube5b \uc5e0\ube14\ub818[\ud798]",json:null,isFetching:!1},e.fetchDefault=function(){e.setState(Object(j.a)(Object(j.a)({},e.state),{},{isFetching:!0}));var t=window.origin;fetch("".concat(t,"/api/").concat(e.state.query)).then((function(e){return e.json()})).then((function(t){e.setState({json:t,query:e.state.query,isFetching:!1})})).catch((function(e){return console.log(e)}))},e.siptListener=function(t){var a=document.querySelector("#autoComplete").value;"Enter"===t.key&&0!==a.length&&e.sendQuery(a)},e.sendQuery=function(t){e.setState(Object(j.a)(Object(j.a)({},e.state),{},{isFetching:!0})),fetch("/api/".concat(t)).then((function(e){return e.json()})).then((function(a){console.log("\ud83d\udd3b fetch.query.result"),console.log(a),e.setState({json:a,query:t,isFetching:!1})})).catch((function(e){return console.log(e)}))},e.onEnter=function(t){e.sendQuery(t)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){console.log("\ud83d\udd0c component.Wd.mount"),this.fetchDefault()}},{key:"render",value:function(){var e=this.state.json||{},t=Object.keys(e),a=this.state.query,n=((((e[0]||{})[a]||[]).rows||[])[0]||{}).itemId||"43378c2c961612d37ea73a16aeecaa9e",c=t.reduce((function(t,a,n){return t.push(new Date(e[a]._timeStamp).toLocaleString()),t}),[]),s=t.reduce((function(t,n,r){var c=((((e[n]||{})[a]||[]).rows||[])[0]||{}).unitPrice||0;return t.push(c),t}),[]);c.reverse(),s.reverse();return r.a.createElement("div",{className:"wd"},r.a.createElement("div",{className:"wd__elem1"}),r.a.createElement("div",{className:"wd__elem2 --horizontal"},r.a.createElement("div",{className:"wd__elem2__elem1"},r.a.createElement(q,{onEnter:this.onEnter}),r.a.createElement("div",{className:"summary-data"}),r.a.createElement("div",{className:"recent-search"})),r.a.createElement("div",{className:"wd__elem2__elem2 --vertical"},r.a.createElement("div",{className:"is-fetching "+(!1===this.state.isFetching?"":"shown")},r.a.createElement("div",{className:"loading-svg"})),r.a.createElement("div",{className:"wd__elem2__elem2__elem1"},r.a.createElement("div",{className:"wd__elem2__elem2__elem1__query-name"},r.a.createElement("img",{src:"https://img-api.neople.co.kr/df/items/".concat(n),width:28,height:28}),r.a.createElement("div",null,a)),r.a.createElement("div",null,r.a.createElement(A,{renderData:e,query:a}))),t.map((function(t){return r.a.createElement(O,{key:t,query:a,data:e[t]})}))),r.a.createElement("div",{className:"layer-e"},"TEST")),r.a.createElement("div",{className:"footer"}),r.a.createElement("div",null))}}]),a}(r.a.Component);k="https://use.fontawesome.com/releases/v5.6.3/css/all.css",new Promise((function(e,t){var a=document.createElement("link");a.rel="stylesheet",a.href=k,a.integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/",a.crossOrigin="anonymous",document.head.appendChild(a),a.onload=function(){e()}}));var M=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,null,r.a.createElement(y,null),r.a.createElement(m.a,{exact:!0,path:"/wd",component:L}),r.a.createElement(m.a,{exact:!0,path:"/quick",component:S}),r.a.createElement(m.a,{exact:!0,path:"/about",component:E})),r.a.createElement(g,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},92:function(e,t,a){e.exports=a(237)},97:function(e,t,a){},99:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"}},[[92,1,2]]]);
//# sourceMappingURL=main.d7f45d24.chunk.js.map